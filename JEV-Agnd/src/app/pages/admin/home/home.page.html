<div class="ion-page" id="main-content">
  <ion-header mode="ios">
    <ion-toolbar>
      <ion-buttons slot="start">
        <abbr title="Páginas">
          <ion-menu-button></ion-menu-button>
        </abbr>
      </ion-buttons>
      <ion-title>Agendamentos</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Conteúdo da página -->
  <ion-content class="ion-padding">

    <ion-row>


      <ion-col size="12">
        <ion-item>

          <ion-searchbar style="margin-top: 1.5%;" class="searchBar" placeholder="Buscar agendamento"></ion-searchbar>
        </ion-item>
        <ng-template *ngIf="Agendamentos && Agendamentos.length == 0">
          <ion-toolbar class="toolbar">
            <form action="GET" method="get" class="formFilter">
              <ion-col size="6" class="date">
                <abbr title="Pesquisar por data">
                  <input type="date" name="" (input)="search($event)" />
                </abbr>
              </ion-col>
              <ion-col size="6" class="inputSearch">
                <ion-button fill="outline" id="buscar">
                  <ion-icon style="margin-right: 5%" name="search-sharp"></ion-icon>
                  Buscar
                </ion-button>
              </ion-col>
            </form>
          </ion-toolbar>
        </ng-template>
        <ion-col size="12" *ngIf="Agendamentos && Agendamentos.length > 0; else noCard">
          <ion-list lines="none">
            <div *ngFor="let Agendamentos of Agendamentos_exibidos;let i = index">
              <ion-item>
                <ion-card>
                  <ion-card-header>

                    <div *ngIf="Agendamentos.status == 'Confirmado'; else otherStatus">
                      <ion-card-title class="status ok">
                        <div class="ok">
                          <ion-icon name="checkmark-circle"></ion-icon>
                          <ion-text>
                            {{Agendamentos.status}}
                          </ion-text>
                        </div>
                      </ion-card-title>
                    </div>

                    <ng-template #otherStatus>
                      <ion-card-title class="status waiting">
                        <div class="ok">
                          <ion-icon name="time"></ion-icon>
                          <ion-text>
                            {{Agendamentos.status}}
                          </ion-text>
                        </div>
                      </ion-card-title>
                    </ng-template>

                    <ion-card-title id="horario">{{Agendamentos.horarioInicio}} -
                      {{Agendamentos.horarioFim}}</ion-card-title>
                    <ion-card-subtitle>{{Agendamentos.cliente}}</ion-card-subtitle>
                  </ion-card-header>

                  <ion-card-content>{{Agendamentos.servico}}</ion-card-content>
                  <ion-card-content>
                    <abbr title="Excluir agendamento">
                      <ion-button class="delete" fill="outline" (click)="setOpenDelete(true);">
                        <ion-icon name="trash"></ion-icon>
                        Excluir
                      </ion-button></abbr>
                    <abbr title="Editar agendamento">
                      <ion-button class="edit" id="editar" (click)="setOpenEdit(true)">
                        <ion-icon name="create-outline"></ion-icon>
                        Editar
                      </ion-button></abbr>
                    <abbr title="Informações do agendamento">
                      <ion-button class="info">
                        <ion-icon name="information-circle-sharp"></ion-icon>
                      </ion-button></abbr>

                  </ion-card-content>
                </ion-card>
              </ion-item>
            </div>
          </ion-list>
        </ion-col>
      </ion-col>
      <ng-template #noCard>
        <ion-col size="12" *ngIf="Agendamentos && Agendamentos.length == 0 && !this.Isloading">
          <ion-text class="ion-text-center">
            <p>Os seus agendamentos serão exibidos neste local.</p>
            <ion-buttons class="button_add">
              <abbr title="Agendar">
                <ion-button (click)="setOpenAdd(true)">
                  fazer agendamento
                </ion-button></abbr>
            </ion-buttons>
          </ion-text>
        </ion-col>
      </ng-template>
      <ion-col class="ion-text-center spinner_cont" size="12" *ngIf="this.Isloading">
        <ion-spinner class="spinner" color="danger" name="dots"></ion-spinner>
      </ion-col>
    </ion-row>

    <ion-modal id="edit-modal" #modal trigger="editar" [isOpen]="modalOpenEdit" backdropDismiss="false">
      <ng-template>
        <div class="wrapper modalCont">
          <div class="modal_title">
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-button (click)="setOpenEdit(false)">
                  <ion-label class="button_modal">Cancelar</ion-label>
                </ion-button>
              </ion-buttons>
              <ion-buttons slot="end">
                <ion-button>
                  <label class="button_modal" for="EditFormSubmit" (click)="setOpenEdit('submit')">Editar</label>
                </ion-button>
              </ion-buttons>
            </ion-toolbar>
          </div>

          <form action="" method="post" class="form_modalEdit" (ngSubmit)="submit_edit()" [formGroup]="EditForm"
            #formDir="ngForm">
            <ion-list lines="none" class="list-content">
              <div class="container_form">
                <ion-datetime minuteValues="0,15,30,45" [isDateEnabled]="isWeekday" class="calendario_modal">
                  <span slot="time-label">
                    <ion-text class="time_title">
                      <ion-icon style="font-size: 1rem" name="alarm-outline"></ion-icon>
                      Horário
                    </ion-text>
                  </span>
                </ion-datetime>
                <div>
                  <ion-select label="Cliente" label-placement="floating" interface="popover" formControlName="cliente">
                    <!-- Opções de clientes -->
                    <ion-select-option value="Laura Pereira">Laura Peneira</ion-select-option>
                    <ion-select-option value="Josefina Chapéu">Josefina Chapéu</ion-select-option>
                    <ion-select-option value="Claudinha Sia Justa">Claudinha Saia Justa</ion-select-option>
                  </ion-select>
                  <div class="message-alert" *ngIf="cliente_edit.invalid && formDir.submitted">
                    Selecione um cliente.
                  </div>
                </div>
                <div>
                  <ion-select label="Serviço(s):" label-placement="floating" placeholder="Selecione o(s) serviço(s)"
                    [multiple]="true" interface="popover" formControlName="servicos">
                    <ion-select-option value="apples">Cabelo</ion-select-option>
                    <ion-select-option value="oranges">Unha</ion-select-option>
                    <ion-select-option value="bananas">Pedicure</ion-select-option>
                  </ion-select>
                  <div class="message-alert" *ngIf="servicos_edit.invalid && formDir.submitted">
                    Selecione o(s) serviço(s).
                  </div>
                </div>
                <div>
                  <ion-select label="Método de Pagamento" label-placement="floating" interface="popover"
                    formControlName="formaDePagamento">
                    <!-- Opções de pagamento -->
                    <ion-select-option value="pix">Pix</ion-select-option>
                    <ion-select-option value="dinheiro">Dinheiro</ion-select-option>
                    <ion-select-option value="debito">Débito</ion-select-option>
                    <ion-select-option value="credito">Crédito</ion-select-option>
                  </ion-select>
                  <div class="message-alert" *ngIf="formaDePagamento_edit.invalid && formDir.submitted">
                    Selecione uma forma de pagamento.
                  </div>
                </div>
                <div>
                  <ion-text>
                    <h3>Preço (R$):</h3>
                  </ion-text>
                  <ion-text>
                    <p>xx.xx</p>
                  </ion-text>
                </div>
              </div>
            </ion-list>
            <input type="submit" id="EditFormSubmit" style="display: none;">
          </form>
        </div>
      </ng-template>
    </ion-modal>

    <!-- modal de agendamento-->
    <ion-modal #modal trigger="add_area" [isOpen]="modalOpenAdd" backdropDismiss="false">
      <ng-template>
        <div class="wrapper modalCont">
          <div class="modal_title">
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-button (click)="setOpenAdd(false)">
                  <ion-label class="button_modal">Cancelar</ion-label>
                </ion-button>
              </ion-buttons>
              <ion-buttons slot="end">
                <ion-button>
                  <label class="button_modal" for="AddFormSubmit" (click)="setOpenAdd('submit')">Agendar</label>
                </ion-button>
              </ion-buttons>
            </ion-toolbar>
          </div>
          <form action="" method="post" class="form_modalAdd" (ngSubmit)="submit_add()" [formGroup]="AddForm"
            #formDir="ngForm">
            <ion-list lines="none" class="list-content">
              <div class="container_form">
                <ion-datetime minuteValues="0,15,30,45" [isDateEnabled]="isWeekday" class="calendario_modal"
                  (ionChange)="getData($event)">
                  <span slot="time-label">
                    <ion-text class="time_title">
                      <ion-icon style="font-size: 1rem" name="alarm-outline"></ion-icon>
                      Horário
                    </ion-text>
                  </span>
                </ion-datetime>
                <ion-input formControlName="calendario" id="fakeCalendario" type="text"></ion-input>
                <div class="message-alert" *ngIf="calendario_add.invalid && formDir.submitted">
                  Selecione um dia e Horario.
                </div>
                <!-- Clientes -->
                <div class="item_form">
                  <ion-select label="Cliente" label-placement="floating" interface="popover" formControlName="cliente">
                    <!-- Opções de clientes -->
                    <ion-select-option value="Laura Pereira">Laura Peneira</ion-select-option>
                    <ion-select-option value="Josefina Chapéu">Josefina Chapéu</ion-select-option>
                    <ion-select-option value="Claudinha Sia Justa">Claudinha Saia Justa</ion-select-option>
                  </ion-select>
                  <div class="message-alert" *ngIf="cliente_add.invalid && formDir.submitted">
                    Selecione um cliente.
                  </div>
                </div>
                <!-- Serviços -->
                <div class="item_form">
                  <ion-select label="Serviço(s):" label-placement="floating" placeholder="Selecione o(s) serviço(s)"
                    [multiple]="true" interface="popover" formControlName="servicos">
                    <ion-select-option value="cabelo">Cabelo</ion-select-option>
                    <ion-select-option value="unha">Unha</ion-select-option>
                    <ion-select-option value="pedicure">Pedicure</ion-select-option>
                  </ion-select>
                  <div class="message-alert" *ngIf="servicos_add.invalid && formDir.submitted">
                    Selecione o(s) serviço(s).
                  </div>
                </div>
                <!-- Pagamento -->
                <div class="item_form">
                  <ion-select label="Método de Pagamento" label-placement="floating" interface="popover"
                    formControlName="formaDePagamento">
                    <!-- Opções de pagamento -->
                    <ion-select-option value="pix">Pix</ion-select-option>
                    <ion-select-option value="dinheiro">Dinheiro</ion-select-option>
                    <ion-select-option value="debito">Débito</ion-select-option>
                    <ion-select-option value="credito">Crédito</ion-select-option>
                  </ion-select>
                  <div class="message-alert" *ngIf="formaDePagamento_add.invalid && formDir.submitted">
                    Selecione uma forma de pagamento.
                  </div>
                </div>
                <!-- Preço -->
                <div>
                  <ion-text>
                    <h3>Preço (R$):</h3>
                  </ion-text>
                  <ion-text>
                    <p>xx.xx</p>
                  </ion-text>
                </div>
              </div>
            </ion-list>
            <input type="submit" id="AddFormSubmit" style="display: none;">
          </form>
        </div>
      </ng-template>
    </ion-modal>

    <ion-alert header="Tem certeza?" [buttons]="alertButtons" (didDismiss)="setResult($event)" mode="ios"
      [isOpen]="modalOpenDelete" backdropDismiss="false"
      ></ion-alert>

    <!-- botão add agendamento-->
    <ion-fab id="add_area" horizontal="end" vertical="bottom" slot="fixed" (click)="setOpenAdd(true)">
      <abbr title="Agendar">
        <ion-fab-button>
          <ion-icon id="add" name="calendar" expand="block"></ion-icon>
        </ion-fab-button>
      </abbr>
    </ion-fab>
    <!-- Ion toast -->
    <ion-toast [message]="message" icon="globe" [isOpen]="OpenToast" id="message" class="fail"></ion-toast>
  </ion-content>
</div>